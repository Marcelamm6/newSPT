'use strict';

const _1A = {
  numero: '1A',
  nome: 'Goten',
  forca: 90000000,
  altura: 1.4,
  inteligencia: 95,
  tecnicas: 105,
  transformacoes: 1,
  imagem: 'images/goten.png',
};
const _1B = {
  numero: '1B',
  nome: 'Goku',
  forca: 500000000,
  altura: 1.85,
  inteligencia: 150,
  tecnicas: 390,
  transformacoes: 4,
  imagem: 'images/Goku1.png',
};
const _1C = {
  numero: '1C',
  nome: 'Vegeta',
  forca: 460000000,
  altura: 1.69,
  inteligencia: 160,
  tecnicas: 245,
  transformacoes: 3,
  imagem: 'images/vegeta.png',
};
const _1D = {
  numero: '1D',
  nome: 'Gohan',
  forca: 470000000,
  altura: 1.85,
  inteligencia: 155,
  tecnicas: 245,
  transformacoes: 3,
  imagem: 'images/gohan.png',
};
const _2A = {
  numero: '2A',
  nome: 'Piccolo',
  forca: 365000000,
  altura: 2.0,
  inteligencia: 160,
  tecnicas: 270,
  transformacoes: 2,
  imagem: 'images/piccolo.png',
};
const _2B = {
  numero: '2B',
  nome: 'Trunks',
  forca: 365000000,
  altura: 1.8,
  inteligencia: 155,
  tecnicas: 163,
  transformacoes: 1,
  imagem: 'images/miraitrunks.png',
};
const _2C = {
  numero: '2C',
  nome: 'Trunks',
  forca: 95000000,
  altura: 1.45,
  inteligencia: 98,
  tecnicas: 110,
  transformacoes: 1,
  imagem: 'images/trunks.png',
};
const _2D = {
  numero: '2D',
  nome: 'Kuririn',
  forca: 70000000,
  altura: 1.55,
  inteligencia: 150,
  tecnicas: 175,
  transformacoes: 0,
  imagem: 'images/kuririn.png',
};
const _3A = {
  numero: '3A',
  nome: 'Kame',
  forca: 8000,
  altura: 1.6,
  inteligencia: 155,
  tecnicas: 300,
  transformacoes: 0,
  imagem: 'images/mestrekame.png',
};
const _3B = {
  numero: '3B',
  nome: 'Yamcha',
  forca: 50000000,
  altura: 1.8,
  inteligencia: 100,
  tecnicas: 145,
  transformacoes: 0,
  imagem: 'images/yancha.png',
};
const _3C = {
  numero: '3C',
  nome: 'Tenshinhan',
  forca: 65000000,
  altura: 1.9,
  inteligencia: 120,
  tecnicas: 180,
  transformacoes: 0,
  imagem: 'images/tenshinhan.png',
};
const _3D = {
  numero: '3D',
  nome: 'Raditz',
  forca: 70000,
  altura: 1.95,
  inteligencia: 80,
  tecnicas: 80,
  transformacoes: 1,
  imagem: 'images/raditz.png',
};
const _4A = {
  numero: '4A',
  nome: 'Freeza',
  forca: 100000000,
  altura: 1.67,
  inteligencia: 135,
  tecnicas: 245,
  transformacoes: 3,
  imagem: 'images/freeza.png',
};
const _4B = {
  numero: '4B',
  nome: 'Nappa',
  forca: 80000,
  altura: 2.1,
  inteligencia: 60,
  tecnicas: 56,
  transformacoes: 1,
  imagem: 'images/nappa.png',
};
const _4C = {
  numero: '4C',
  nome: 'Zarbon',
  forca: 65000000,
  altura: 1.9,
  inteligencia: 100,
  tecnicas: 145,
  transformacoes: 1,
  imagem: 'images/zarbon.png',
};
const _4D = {
  numero: '4D',
  nome: 'Dodoria',
  forca: 60000000,
  altura: 1.69,
  inteligencia: 99,
  tecnicas: 144,
  transformacoes: 0,
  imagem: 'images/dodoria.png',
};
const _5A = {
  numero: '5A',
  nome: '17',
  forca: 300000000,
  altura: 1.7,
  inteligencia: 130,
  tecnicas: 160,
  transformacoes: 0,
  imagem: 'images/17.png',
};
const _5B = {
  numero: '5B',
  nome: '19',
  forca: 90000000,
  altura: 1.7,
  inteligencia: 100,
  tecnicas: 85,
  transformacoes: 0,
  imagem: 'images/19.png',
};
const _5C = {
  numero: '5C',
  nome: 'Maki Gero',
  forca: 70000000,
  altura: 1.75,
  inteligencia: 200,
  tecnicas: 90,
  transformacoes: 0,
  imagem: 'images/makigero.png',
};
const _5D = {
  numero: '5D',
  nome: 'Ginyu',
  forca: 70000000,
  altura: 2.5,
  inteligencia: 80,
  tecnicas: 165,
  transformacoes: 0,
  imagem: 'images/ginyu.png',
};
const _6A = {
  numero: '6A',
  nome: '16',
  forca: 310000000,
  altura: 2.0,
  inteligencia: 135,
  tecnicas: 165,
  transformacoes: 0,
  imagem: 'images/16.png',
};
const _6B = {
  numero: '6B',
  nome: '18',
  forca: 295000000,
  altura: 1.7,
  inteligencia: 130,
  tecnicas: 160,
  transformacoes: 0,
  imagem: 'images/18.png',
};
const _6C = {
  numero: '6C',
  nome: 'Cell',
  forca: 400000000,
  altura: 1.95,
  inteligencia: 135,
  tecnicas: 400,
  transformacoes: 3,
  imagem: 'images/cell.png',
};
const _6D = {
  numero: '6D',
  nome: 'Dabura',
  forca: 400000000,
  altura: 2.1,
  inteligencia: 140,
  tecnicas: 165,
  transformacoes: 0,
  imagem: 'images/dabura.png',
};
const _7A = {
  numero: '7A',
  nome: 'Mr. Satan',
  forca: 300,
  altura: 1.95,
  inteligencia: 100,
  tecnicas: 50,
  transformacoes: 0,
  imagem: 'images/satan.png',
};
const _7B = {
  numero: '7B',
  nome: 'Boo',
  forca: 560000000,
  altura: 1.7,
  inteligencia: 50,
  tecnicas: 410,
  transformacoes: 3,
  imagem: 'images/bu.png',
};
const _7C = {
  numero: '7C',
  nome: 'Majin Boo',
  forca: 490000000,
  altura: 2.0,
  inteligencia: 45,
  tecnicas: 410,
  transformacoes: 0,
  imagem: 'images/majinbu.png',
};
const _7D = {
  numero: '7D',
  nome: 'Videl',
  forca: 500,
  altura: 1.65,
  inteligencia: 154,
  tecnicas: 55,
  transformacoes: 0,
  imagem: 'images/videl.png',
};
const _8B = {
  numero: '8B',
  nome: 'Tao Pai Pai',
  forca: 600,
  altura: 1.8,
  inteligencia: 110,
  tecnicas: 80,
  transformacoes: 0,
  imagem: 'images/taopaipai.png',
};
const _8C = {
  numero: '8C',
  nome: 'Chaos',
  forca: 6000,
  altura: 1.0,
  inteligencia: 94,
  tecnicas: 147,
  transformacoes: 0,
  imagem: 'images/chaos.png',
};

const characters = [
  _1A,
  _1B,
  _1C,
  _1D,
  _2A,
  _2B,
  _2C,
  _2D,
  _3A,
  _3B,
  _3C,
  _3D,
  _4A,
  _4B,
  _4C,
  _4D,
  _5A,
  _5B,
  _5C,
  _5D,
  _6A,
  _6B,
  _6C,
  _6D,
  _7A,
  _7B,
  _7C,
  _7D,
  _8B,
  _8C,
];
///////////////////////////////////////////////////////////////////
////////////Separando as cartas de forma aleatória/////////////////
///////////////////////////////////////////////////////////////////
let cartas = [
    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
    21, 22, 23, 24, 25, 26, 27, 28, 29,
  ],
  aleatoriasCartas = [],
  i = cartas.length,
  j = 0;

while (i--) {
  j = Math.floor(Math.random() * (i + 1));
  aleatoriasCartas.push(cartas[j]);
  cartas.splice(j, 1);
}

// console.log(aleatoriasCartas);

let player1 = aleatoriasCartas.splice(15);
let player2 = aleatoriasCartas;

console.log(player1, player2);

// console.log(player1[0]);

/////////////////////////////////////////////////////////////////////
///////////// Colocando as informações nas cartas (html)/////////////
////////////////////////////////////////////////////////////////////

let numero = document.querySelectorAll('.numero');
let nome = document.querySelectorAll('.nome');
let imagem = document.querySelectorAll('.imagem');
let forca = document.querySelectorAll('.forca');
let altura = document.querySelectorAll('.altura');
let inteligencia = document.querySelectorAll('.inteligencia');
let tecnicas = document.querySelectorAll('.tecnicas');
let transformacoes = document.querySelectorAll('.transformacoes');

// console.log(numero);

const cartaPlayer1 = function (i) {
  numero[0].innerHTML = characters[player1[i]].numero;
  nome[0].innerHTML = characters[player1[i]].nome;
  imagem[0].src = characters[player1[i]].imagem;
  forca[0].innerHTML = formaNumero(characters[player1[i]].forca);
  altura[0].innerHTML = characters[player1[i]].altura;
  inteligencia[0].innerHTML = characters[player1[i]].inteligencia;
  tecnicas[0].innerHTML = characters[player1[i]].tecnicas;
  transformacoes[0].innerHTML = characters[player1[i]].transformacoes;
};

const cartaPlayer2 = function (i) {
  numero[1].innerHTML = characters[player2[i]].numero;
  nome[1].innerHTML = characters[player2[i]].nome;
  imagem[1].src = characters[player2[i]].imagem;
  forca[1].innerHTML = formaNumero(characters[player2[i]].forca);
  altura[1].innerHTML = characters[player2[i]].altura;
  inteligencia[1].innerHTML = characters[player2[i]].inteligencia;
  tecnicas[1].innerHTML = characters[player2[i]].tecnicas;
  transformacoes[1].innerHTML = characters[player2[i]].transformacoes;
};

cartaPlayer1(0);
cartaPlayer2(0);

/////////////////Arrumando os números///////////////////

function formaNumero(numero) {
  return new Intl.NumberFormat('pt-BR').format(numero);
}

let superTrunfo1 = document.querySelector('.sp--esquerda');
let superTrunfo2 = document.querySelector('.sp--direita');

let nomeJ1 = document.querySelector('.carta.esquerda .nome').textContent;
console.log(nomeJ1);

// FIXME:
// function spt() {
//   if (player1[0] == 1) {
// superTrunfo1.style.display = 'flex';
//   }
// }
// spt();

/////////////////////////////////////////////////////////////
///////////////////////Comparando cartas/////////////////////
////////////////////////////////////////////////////////////

const atributos = document.querySelector('.atributos');
const cartaDireita = document.querySelector('.direita');
const cartaEsquerda = document.querySelector('.esquerda');
const cartaVirada = document.querySelector('.cartaV');
const cartaViradaE = document.querySelector('.cartaEV');

const ganhou = document.querySelector('.ganhou');
const perdeu = document.querySelector('.perdeu');

const pontos1 = document.querySelector('.pontos1');
const pontos2 = document.querySelector('.pontos2');

const opacidade = document.querySelectorAll('.opac');
const fundo = document.querySelectorAll('.cor');

pontos1.textContent = 15;
pontos2.textContent = 15;

////////valor clicado//////////

function jogou() {
  cartaVirada.style.display = 'none';
  cartaDireita.style.display = 'flex';
  btnProximo.style.display = 'block';
  cartaEsquerda.style.pointerEvents = 'none';
  cartaDireita.style.pointerEvents = 'none';
}

atributos.addEventListener('click', function (e) {
  const clicado = e.target.closest('.caracteristicas');
  const valorClicado = clicado.children[1].classList[0];

  let valor2 = clicado.children[1].classList[0];
  // const valorCarta2 = document.querySelector(`.direita .${valor2}`).innerHTML;

  let idJogador1 = clicado
    .closest('.carta')
    .querySelector('.numero').textContent;

  let idJogador2 = document.querySelector('.carta.direita .numero').textContent;

  let atributo1 = characters.find(x => x.numero == idJogador1)[valorClicado];
  let atributo2 = characters.find(x => x.numero == idJogador2)[valor2];

  // console.log(atributo1);
  // console.log(atributo2);

  //FIXME: encontrar goku
  let nomeJ1 = document.querySelector('.carta.esquerda .nome').textContent;
  // console.log(nomeJ1);

  /////////comparando////////////

  cartaEsquerda.style.pointerEvents = 'none';

  if (atributo1 > atributo2) {
    jogou();

    document.querySelector(`.${valorClicado}`).style.background = '#8ce99a';
    document.querySelector(`.direita .${valor2}`).style.background = '#ff8787';

    player1.push(player2[0]);
    player2.shift();
    player1.push(player1[0]);
    player1.shift();
    console.log(player1, player2);

    pontos1.textContent++;
    pontos2.textContent--;
  }
  if (atributo1 < atributo2) {
    jogou();

    document.querySelector(`.${valorClicado}`).style.background = '#ff8787';
    document.querySelector(`.direita .${valor2}`).style.background = '#8ce99a';

    player2.push(player1[0]);
    player1.shift();
    player2.push(player2[0]);
    player2.shift();
    console.log(player1, player2);

    pontos2.textContent++;
    pontos1.textContent--;
  }
  if (atributo1 == atributo2) {
    jogou();

    document.querySelector(`.${valorClicado}`).style.background = '#ffe066';
    document.querySelector(`.direita .${valor2}`).style.background = '#ffe066';

    player1.push(player1[0]);
    player1.shift();
    player2.push(player2[0]);
    player2.shift();
    console.log(player1, player2);
  }
  if (pontos1.textContent == 30) {
    opacidade.forEach(item => (item.style.display = 'none'));

    ganhou.style.display = 'block';
    document.querySelector('.jogar').style.display = 'block';
    btnProximo.style.display = 'none';
  }
  if (pontos2.textContent == 30) {
    opacidade.forEach(item => (item.style.display = 'none'));

    perdeu.style.display = 'block';
    document.querySelector('.jogar').style.display = 'block';
    btnProximo.style.display = 'none';
  }
});

const btnProximo = document.querySelector('.proximo');

btnProximo.addEventListener('click', function proximo(e) {
  e.preventDefault();

  cartaPlayer1(0);
  cartaPlayer2(0);

  cartaVirada.style.display = 'flex';
  cartaDireita.style.display = 'none';

  fundo.forEach(item => (item.style.background = '#dddddd'));

  cartaEsquerda.style.pointerEvents = 'auto';
  btnProximo.style.display = 'none';
});

////////////////////////Jogar novamente////////////////////

let btnJogar = document.querySelector('.jogar');

btnJogar.addEventListener('click', function () {
  window.location.reload();
});
